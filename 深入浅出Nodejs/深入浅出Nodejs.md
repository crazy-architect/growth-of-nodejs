# 第1章 Node简介
### 为什么是JavaScript？
> 设计高性能Web服务器的几个要点：事件驱动、非阻塞I/O

### Node的特点
* 异步I/O (Don't call me, I will call you)
  > 在Node中，绝大多数的操作都以异步的方式进行调用
* 事件与回调函数
* 单线程
  > Node保持了JavaScript在浏览器中单线程的特点。而且在Node中，JavaScript与其余线程是无法共享任何状态的，单线程的最大好处是不用像多线程编程那样处处在意状态的同步问题，这里没有死锁的存在，也没有线程上下文交换所带来的性能上的开销
  
  > 单线程的缺点：1.无法利用多核；2.错误会引起整个应用退出，应用的健壮性值得考验；3.大量对算占用CPU导致无法继续调用异步I/O
* 跨平台

### Node的应用场景

* I/O密集型
  > Node处理I/O的能力是值得竖起拇指称赞的
* CPU密集型
  > CPU密集型应用给Node带来的挑战：由于JavaScript单线程的原因，如果有长时间运行的计算，将会导致CPU时间片不能释放，使得后续I/O无法发起。但适当调整和分解大型运算任务为多个小任务，使得运算能够适时释放，不阻碍I/O调用的发起。同时，还可以通过下列方案提高性能：1.编写C/C++扩展插件；2.子进程方案

* Node使用者
  * 前后端编程语言环境统一
  * Node带来的高性能I/O应用于实时应用
  * 并行I/O使得使用者可以更高效地利用分布式环境
  * 并行I/O，有效利用稳定接口提升Web渲染能力
  * 云计算平台提供Node支持
  * 游戏开发领域
  * 工具类应用

# 第2章 模块机制
### CommonJS的模块规范
* 模块引用
  ```
  var math = require('math');
  ```
* 模块定义
  ```
  //math.js
  exports.add = function(){
  }
  ```
* 模块标识
  > 就是传递给require()方法的参数
### Node的模块实现
* Node中引入模块，需要经历3个步骤：1.路径分析；2.文件定位；3.编译执行；
* 模块编译
  * .js文件：通过fs模块同步读取文件后编译执行
  * .node文件：用C/C++编写的扩展文件，通过dlopen()方法加载最后编译生成的文件
  * .json文件：通过fs模块同步读取文件后，用JSON.parse()解析返回结果
  * 其余扩展名文件：它们都被当做.js文件载入

### 包与NPM
* 包结构
  * package.json：包描述文件
  * bin: 用于存放二进制文件的目录
  * lib: 用于存放JavaScript代码的目录
  * doc: 用于存放文档的目录
  * test: 用于存放单元测试用例的代码

# 第3章 异步I/O
与Node的事件驱动、异步I/O设计理念比较相近的一个知名产品为Nginx。Nginx采用纯C编写，性能表现优异。
### 异步I/O实现现状
### 非I/O的异步API
* 在Node中，大部分的异步处理是IO操作，但也有几个非IO的异步API，它们是setTimeout(),setInterval(),setImmediate(),process.nextTick()

# 第4章 异步编程
### 异步编程的解决方案
* 事件发布/订阅模式
* Promise/Deferred模式
* 流程控制库

